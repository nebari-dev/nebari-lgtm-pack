{{/*
Grafana dashboard provisioning ConfigMap.
Picked up by Grafana's sidecar via the grafana_dashboard label.
Dashboard JSON files are loaded from the dashboards/ directory.
*/}}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "nebari-lgtm-pack.fullname" . }}-dashboards
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "nebari-lgtm-pack.labels" . | nindent 4 }}
    grafana_dashboard: "1"
  annotations:
    grafana_folder: "Nebari"
data:
  {{- range $path, $_ := .Files.Glob "dashboards/*.json" }}
  {{ $path | base }}: |-
    {{- $.Files.Get $path | nindent 4 }}
  {{- end }}
